# CLI Contract

場所: `src/cli/` に実装されるコマンドと引数の仕様

## コマンド一覧

- `todo add` — タスクを追加
  - 引数 / オプション:
    - `--title` (必須)
    - `--location` (必須, 都市名)
    - `--due` (必須, 自然言語で指定可能: 明日, 来週の月曜, 2025-12-15 14:00 など)
    - `--priority` (任意, `low|medium|high`, 既定 `medium`)
  - 挙動:
    - 日付を解析して `due_date` を生成（ユーザーに確認を求めるモードを提供）
    - ジオコーディングを行い `location` を保存
    - 天気予報を取得して候補日を算出、`candidate_date` に格納
  - 出力 (成功): 日本語で要約を表示（ID, タイトル, 候補日, 候補日の降水確率と気温）
  - エラー: 不正入力時や API エラー時は日本語で説明を出力し、登録は一部でも行われた場合はその状態を明示する

- `todo list` — タスク一覧表示
  - 引数:
    - `--all` (完了済み含む、ただし完了は自動削除なので通常は未使用)
    - `--sort` (date|priority|created)
  - 出力: 日付順（または指定の順）に要約リストを日本語で表示

- `todo show <id>` — 詳細表示
  - 出力: タスクの全フィールド（location の詳細、候補日の天気情報、作成日時など）を日本語で表示

- `todo update <id>` — タスク更新
  - オプション: `--title`, `--location`, `--due`, `--priority`, `--complete`（true/false）
  - 挙動: `--complete true` の場合はタスクを完了扱いとしストレージから削除する
  - 出力: 更新後の要約または削除の確認

- `todo delete <id>` — タスク削除
  - 挙動: 明示的にタスクを削除（完了ではないがユーザーによる削除）

- `todo calendar --month YYYY-MM` — 月次表示
  - 挙動: 指定月の候補日/期限日を日付カレンダー形式で日本語表示

## インタラクティブモード
- `todo interactive` を提供し、プロンプト形式で `add` / `list` / `update` が行える。自然言語による日付入力はインタラクティブで丁寧に確認。

## 出力仕様
- すべて日本語メッセージ
- 構造化出力として `--json` を付けると JSON を出力（自動化用）

## エラーコード
- 1: 不正入力（バリデーションエラー）
- 2: 外部 API エラー（ジオコーディング/天気取得）
- 3: 内部エラー（DB など）

