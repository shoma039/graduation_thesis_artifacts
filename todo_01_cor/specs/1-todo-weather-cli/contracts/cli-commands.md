# CLI Commands (contracts) — todo-weather-cli

以下はユーザーが利用する主要なコマンドと引数・期待される出力の仕様です。出力は日本語で行います。

1. `追加` / `add`
   - 入力: `タイトル`（必須）、`期限`（自然言語可）、`優先度`（高/中/低、任意）、`場所`（都市名、必須）
   - 処理: ジオコーディング→タイムゾーン決定→期限解釈→天気取得→候補日選定→タスク保存
   - 出力: 成功メッセージ + タスクID + 候補日一覧（降水確率・予想気温）

2. `一覧` / `list`
   - 入力: 省略可（フィルタ：優先度、期間）
   - 出力: 期限順で整列したタスク一覧。各タスクに候補日（降水確率・気温）を表示

3. `詳細 <id>` / `show <id>`
   - 入力: タスクID
   - 出力: タスクの全項目（位置情報含む）、候補日の理由・天気データを表示

4. `更新 <id>` / `update <id>`
   - 入力: 更新フィールド（タイトル、期限、優先度、場所, 完了フラグ）
   - 処理: 期限や場所を変更した場合は再ジオコーディング/再候補選定を実行
   - 出力: 更新結果の要約

5. `完了 <id>` / `complete <id>`
   - 入力: タスクID
   - 処理: タスクを完了状態に変更 → ストレージから削除
   - 出力: 削除完了メッセージ

6. `削除 <id>` / `delete <id>`
   - 入力: タスクID
   - 処理: 削除確認プロンプト → 削除
   - 出力: 削除完了メッセージ

7. `カレンダー [YYYY-MM]` / `calendar [YYYY-MM]`
   - 入力: 表示したい月（省略時は当月）
   - 出力: 月次カレンダー形式でタスクを日付順に表示。候補日はハイライトされ、気温・降水確率を添える

8. `候補再計算 <id>` / `recalc-candidates <id>`
   - 入力: タスクID
   - 処理: 現在の天気データで候補日を再計算（手動トリガ用）
   - 出力: 新しい候補日一覧、差分の説明

9. エラーハンドリング
   - 不正入力（無効な日付、存在しない都市名等）は日本語で分かりやすくエラーを返す。例: `場所 "abcd" が見つかりませんでした。候補: 1) Tokyo, Japan 2) Tokyo, USA`。
